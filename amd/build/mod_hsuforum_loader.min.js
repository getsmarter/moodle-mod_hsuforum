define(["jquery"],function(n){return registerPostsObserver=function(){const e=n(".hsuforum-post-wrapper"),t=n(".hsuforum-footer-reply")[0];null!=t&&e.push(t),e&&n(e).each(function(){new MutationObserver(function(){let e=n(this).find("form");if(e){let t=n(e).find(".hsuforum-textarea");n(e).on("submit",function(){0!=n(t).text()&&document.body.dispatchEvent(spinnerStartEvent)})}}).observe(this,{subtree:!0,childList:!0})})},n("select.postratingmenu.ratinginput").change(function(){n(this).closest(".hsuforum-post-wrapper").find("span.hsuforum-unreadcount").hide()}),startSpinnerHandler=function(){n("#hsuforum-overlay-box").show(),n("#hsuforum-loading-container").show()},stopSpinnerHandler=function(){n("#hsuforum-overlay-box").hide(),n("#hsuforum-loading-container").hide()},registerSpinnerEvents=function(){const n=new Event("spinnerStartEvent"),e=new Event("spinnerStopEvent");window.spinnerStartEvent=n,window.spinnerStopEvent=e,document.body.addEventListener("spinnerStartEvent",function(){startSpinnerHandler()}),document.body.addEventListener("spinnerStopEvent",function(){stopSpinnerHandler()})},{init:function(){(function(n,e=0){const t=(new Date).getTime();return new Promise((o,r)=>{const i=setInterval(function(){const s=(new Date).getTime();document.querySelector(n)?(clearInterval(i),o()):e&&s-t>=e&&(clearInterval(i),r())},100)})})("body",3e4).then(function(){n(".container :input").prop("disabled",!1),n(".mod-hsuforum-posts-container").show(),n("#hsuforum-loading-container").hide(),n("#hsuforum-overlay-box").hide(),window.hascompleted=!1;var e=window.location.hash;window.hascompleted||(e&&(n(e).closest("li").data("depth")>0&&n(e).closest(".posts-collapse-container").addClass("show").find(".posts-collapse-toggle.collapse-bottom").attr("aria-expanded","true"),n("html,body").animate({scrollTop:n(e).offset().top-60},1e3)),window.hascompleted=!0)}).catch(function(){throw n(".container :input").prop("disabled",!1),n(".article").show(),n("#hsuforum-loading-container").hide(),n("#hsuforum-overlay-box").hide(),"element did not load in 30 seconds"}),registerPostsObserver(),registerSpinnerEvents()}}});
