define ("mod_hsuforum/mod_hsuforum_save_draft",["jquery"],function(a){function b(b,c,d,e,f){if((""!=b||""!=c)&&""!=e&&""!=f){a.ajax({url:"save_post_draft.php",method:"POST",data:{forumid:b,discussionid:c,postid:d,text:e,userid:f},dataType:"text"})}}function c(b,c,d,e,f){if((""!=b||""!=c||""!=d)&&""!=e){a.ajax({url:"get_post_draft.php",method:"GET",data:{forumid:b,discussionid:c,postid:d,userid:e},dataType:"text",success:function success(a){f.html(a)}})}}return{init:function init(d,e,f){a(function(){var g,h=!1;a(".hsuforum-reply-link").on("click",function(){var b=a(this).closest(".hsuforum-post-wrapper"),g=a(b).attr("data-postid"),h=a(b).find("#hiddenadvancededitoreditable"),i=setInterval(function(){if(h.length){c(d,e,g,f,h);clearInterval(i)}else if(5<=0){clearInterval(i)}h=a(b).find("#hiddenadvancededitoreditable")},200)});a(".hsuforum-footer-reply .hsuforum-use-advanced").not(".hideadvancededitor").on("click",function(b){if(!b.hasOwnProperty("originalEvent")&&h){b.preventDefault();return!1}h=!0;var g=a(".hsuforum-footer-reply").find("#hiddenadvancededitoreditable"),i=setInterval(function(){if(g.length){c(d,e,null,f,g);clearInterval(i)}else if(5<=0){clearInterval(i)}g=a(".hsuforum-footer-reply").find("#hiddenadvancededitoreditable")},200)});a("#newdiscussionform input[type=\"submit\"]").on("click",function(){var b=a(".hsuforum-add-discussion-target").find("#hiddenadvancededitoreditable"),g=setInterval(function(){if(b.length){c(d,e,null,f,b);clearInterval(g)}else if(5<=0){clearInterval(g)}b=a(".hsuforum-add-discussion-target").find("#hiddenadvancededitoreditable")},200)});a(document).on("keyup",".editor_atto_content",function(){var c=a(this).closest(".hsuforum-footer-reply").length,h=null;if(!c){var j=a(this).closest(".hsuforum-post-wrapper");h=a(j).attr("data-postid")||null;if(null===h){j=a(this).closest(".hsuforum-thread");h=a(j).attr("data-postid")||null}}var i=a(this).text();if(g){clearTimeout(g)}g=setTimeout(function(){b(d,e,h,i,f)},5e3)})})}}});
//# sourceMappingURL=mod_hsuforum_save_draft.min.js.map
