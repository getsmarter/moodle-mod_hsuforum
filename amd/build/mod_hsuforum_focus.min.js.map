{"version":3,"sources":["../src/mod_hsuforum_focus.js"],"names":["define","$","init","on","id","collapseTarget","parentPost","parentElement","position","getBoundingClientRect","y","parent","attr","replace","yAxis","offset","top","document","documentElement","body","animate","scrollTop","hasClass","innerHTML","collapsable","x","length","collapse","removeClass","addClass"],"mappings":"AAICA,OAAM,mCAAC,CAAC,QAAD,CAAD,CAAa,SAASC,CAAT,CAAY,CAE5B,MAAO,CACHC,IAAI,CAAE,eAAW,CACbD,CAAC,CAAC,2BAAD,CAAD,CAA+BE,EAA/B,CAAkC,kBAAlC,CAAsD,UAAW,CAE7D,GAAIC,CAAAA,CAAE,CAAGH,CAAC,CAAC,IAAD,CAAD,CAAQ,CAAR,EAAWG,EAApB,CACA,GAAIA,CAAE,SAAN,CAAsB,IACdC,CAAAA,CAAc,CAAGJ,CAAC,wCAAgCG,CAAhC,QADJ,CAEdE,CAAU,CAAGL,CAAC,CAACI,CAAD,CAAD,CAAkB,CAAlB,EAAqBE,aAFpB,CAIlB,GAAID,CAAU,SAAd,CAA8B,CAC1B,GAAIE,CAAAA,CAAQ,CAAIF,CAAU,CAACG,qBAAX,EAAhB,CAGA,GAAiB,CAAb,CAAAD,CAAQ,CAACE,CAAb,CAAoB,CACDT,CAAC,CAAC,IAAD,CAAD,CAAQU,MAAR,GAAiBC,IAAjB,CAAsB,IAAtB,CADC,CAGhBX,CAAC,CAAC,IAAIG,CAAL,CAAD,CAAUD,EAAV,CAAa,oBAAb,CAAmC,UAAW,CAE1CC,CAAE,CAAGA,CAAE,CAACS,OAAH,CAAW,IAAX,CAAiB,EAAjB,CAAL,CACA,GAAIC,CAAAA,CAAK,CAAGb,CAAC,CAAC,KAAKG,CAAN,CAAD,CAAWW,MAAX,GAAoBC,GAApB,CAA0B,EAAtC,CAEAf,CAAC,CAAC,CAACgB,QAAQ,CAACC,eAAV,CAA2BD,QAAQ,CAACE,IAApC,CAAD,CAAD,CAA6CC,OAA7C,CAAqD,CACjDC,SAAS,CAAEP,CADsC,CAArD,CAEG,GAFH,CAGH,CARD,CASH,CACJ,CACJ,CACJ,CA1BD,EA4BAb,CAAC,CAAC,uBAAD,CAAD,CAA2BE,EAA3B,CAA8B,OAA9B,CAAuC,UAAY,CAC/C,GAAIF,CAAC,CAAC,uBAAD,CAAD,CAA2BqB,QAA3B,CAAoC,UAApC,CAAJ,CAAqD,CACjDrB,CAAC,CAAC,uBAAD,CAAD,CAA2B,CAA3B,EAA8BsB,SAA9B,CAA0C,YAA1C,CAEA,OADMC,CAAAA,CAAW,CAAGvB,CAAC,CAAC,oCAAD,CACrB,CAASwB,CAAC,CAAG,CAAb,CAAgBA,CAAC,CAAGD,CAAW,CAACE,MAAhC,CAAwCD,CAAC,EAAzC,CAA6C,CACzCxB,CAAC,CAAC,IAAMuB,CAAW,CAACC,CAAD,CAAX,CAAerB,EAAtB,CAAD,CAA2BuB,QAA3B,CAAoC,QAApC,CACH,CACD1B,CAAC,CAAC,uBAAD,CAAD,CAA2B2B,WAA3B,CAAuC,UAAvC,CACH,CAPD,IAOO,CACH3B,CAAC,CAAC,uBAAD,CAAD,CAA2B,CAA3B,EAA8BsB,SAA9B,CAA0C,cAA1C,CAEA,OADMC,CAAAA,CAAW,CAAGvB,CAAC,CAAC,oCAAD,CACrB,CAASwB,CAAC,CAAG,CAAb,CAAgBA,CAAC,CAAGD,CAAW,CAACE,MAAhC,CAAwCD,CAAC,EAAzC,CAA6C,CACzCxB,CAAC,CAAC,IAAMuB,CAAW,CAACC,CAAD,CAAX,CAAerB,EAAtB,CAAD,CAA2BuB,QAA3B,CAAoC,QAApC,CACH,CACD1B,CAAC,CAAC,uBAAD,CAAD,CAA2B4B,QAA3B,CAAoC,UAApC,CACH,CACJ,CAhBD,CAiBH,CA/CE,CAiDV,CAnDM,CAAN","sourcesContent":["/**\n * Small function that ties in with bootsrap collapse event classes to scroll a element\n * into view if not on the viewport\n */\n define(['jquery'], function($) {\n\n    return {\n        init: function() {\n            $('.posts-collapse-container').on('hide.bs.collapse', function() {\n                // Collapsable container id\n                let id = $(this)[0].id;\n                if (id !== undefined) {\n                    let collapseTarget = $(`.collapse-top[data-target=\"#${id}\"]`);\n                    let parentPost = $(collapseTarget)[0].parentElement;\n\n                    if (parentPost !== undefined) {\n                        let position =  parentPost.getBoundingClientRect();\n\n                        // Only scroll if element is not in viewport\n                        if (position.y < 0) {\n                            let parentId = $(this).parent().attr('id');\n                            // Only scroll once collapse event is done\n                            $('#'+id).on('hidden.bs.collapse', function() {\n                             //relpace id from the div as its added by moodle by default\n                                id = id.replace(\"id\", \"\");\n                                let yAxis = $('#p'+id).offset().top - 80;\n                                // Smoothing out the animation\n                                $([document.documentElement, document.body]).animate({\n                                    scrollTop: yAxis\n                                }, 1000);\n                            });\n                        }\n                    }\n                }\n            });\n\n            $('.expandalldiscussions').on('click', function () {\n                if ($('.expandalldiscussions').hasClass('expanded')) {\n                    $('.expandalldiscussions')[0].innerHTML = 'Expand All';\n                    const collapsable = $('.posts-collapse-container.collapse');\n                    for (let x = 0; x < collapsable.length; x++) {\n                        $('#' + collapsable[x].id).collapse('toggle');\n                    }\n                    $('.expandalldiscussions').removeClass('expanded');\n                } else {\n                    $('.expandalldiscussions')[0].innerHTML = 'Collapse All';\n                    const collapsable = $('.posts-collapse-container.collapse');\n                    for (let x = 0; x < collapsable.length; x++) {\n                        $('#' + collapsable[x].id).collapse('toggle');\n                    }\n                    $('.expandalldiscussions').addClass('expanded');\n                }\n            });\n        }\n    };\n});\n"],"file":"mod_hsuforum_focus.min.js"}