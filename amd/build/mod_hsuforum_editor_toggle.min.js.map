{"version":3,"sources":["../src/mod_hsuforum_editor_toggle.js"],"names":["define","$","init","selector","targetnode","config","attributes","childList","subtree","observer","MutationObserver","mutationlist","mutation","type","addedNodes","length","forEach","node","classList","contains","button","querySelector","click","el","document","getElementById","focus","e","window","onload","currentbuttons","body","scrollTop","documentElement","observe","on","text","parents"],"mappings":"mnCAAAA,OAAM,2CAAC,CAAC,QAAD,CAAD,CAAa,SAASC,CAAT,CAAY,CAC3B,MAAO,CACHC,IAAI,CAAE,cAASC,CAAT,CAAmB,IACjBC,CAAAA,CADiB,CAIfC,CAAM,CAAG,CAACC,UAAU,GAAX,CAAoBC,SAAS,GAA7B,CAAqCC,OAAO,GAA5C,CAJM,CAMfC,CAAQ,CAAG,GAAIC,CAAAA,gBAAJ,CAAqB,SAASC,CAAT,CAAuB,CACzD,GAAI,kCACuBA,CADvB,QACA,2BAAqC,IAA1BC,CAAAA,CAA0B,SACjC,GAAsB,WAAlB,GAAAA,CAAQ,CAACC,IAAb,CAAmC,CAC/B,GAAID,CAAQ,CAACE,UAAT,CAAoBC,MAAxB,CAAgC,CAE5BH,CAAQ,CAACE,UAAT,CAAoBE,OAApB,CAA4B,SAAUC,CAAV,CAAgB,CAExC,GAAIA,CAAI,CAACC,SAAL,WAAgCD,CAAI,CAACC,SAAL,CAAeC,QAAf,CAAwB,wBAAxB,CAApC,CAAuF,CACnF,GAAIC,CAAAA,CAAM,CAAGH,CAAI,CAACI,aAAL,CAAmB,wBAAnB,CAAb,CACA,GAAID,CAAJ,CAAY,CACRA,CAAM,CAACE,KAAP,GAEA,GAAIC,CAAAA,CAAE,CAAGC,QAAQ,CAACC,cAAT,CAAwB,8BAAxB,CAAT,CACAF,CAAE,CAACG,KAAH,GACA,MACH,CACJ,CACJ,CAZD,CAaH,CACJ,CACJ,CApBD,+BAqBH,CAAC,MAAOC,CAAP,CAAU,CAEX,CACJ,CAzBgB,CANI,CAiCrBC,MAAM,CAACC,MAAP,CAAgB,UAAW,CAEvBzB,CAAU,CAAGoB,QAAQ,CAACH,aAAT,CAAuBlB,CAAvB,CAAb,CAEA,GAAI2B,CAAAA,CAAc,CAAGN,QAAQ,CAACH,aAAT,CAAuB,wBAAvB,CAArB,CAEA,GAAIS,CAAJ,CAAoB,CAChBA,CAAc,CAACR,KAAf,GACAE,QAAQ,CAACO,IAAT,CAAcC,SAAd,CAA0BR,QAAQ,CAACS,eAAT,CAAyBD,SAAzB,CAAqC,CAClE,CAGDvB,CAAQ,CAACyB,OAAT,CAAiB9B,CAAjB,CAA6BC,CAA7B,CACH,CAbD,CAgBAJ,CAAC,CAACuB,QAAD,CAAD,CAAYW,EAAZ,CAAe,OAAf,CAAwB,kBAAxB,CAA4C,UAAW,CACnDlC,CAAC,CAAC,qEAAD,CAAD,CAAuEmC,IAAvE,CAA4E,EAA5E,CACH,CAFD,EAKAnC,CAAC,CAACuB,QAAD,CAAD,CAAYW,EAAZ,CAAe,OAAf,CAAwB,wBAAxB,CAAkD,UAAW,CACzD,GAAyD,CAArD,GAAAlC,CAAC,CAAC,IAAD,CAAD,CAAQoC,OAAR,CAAgB,wBAAhB,EAA0CtB,MAA9C,CAA4D,CACxDd,CAAC,CAAC,qEAAD,CAAD,CAAuEmC,IAAvE,CAA4E,EAA5E,CACH,CACJ,CAJD,CAKH,CA5DE,CA8DV,CA/DK,CAAN","sourcesContent":["define(['jquery'], function($) {\n    return {\n        init: function(selector) {\n            var targetnode;\n\n            // Options for the observer (which mutations to observe)\n            const config = {attributes: false, childList: true, subtree: true};\n\n            const observer = new MutationObserver(function(mutationlist) {\n                try {\n                    for (const mutation of mutationlist) {\n                        if (mutation.type === 'childList') {\n                            if (mutation.addedNodes.length) {\n                                // Iterate over added nodes and check if the wrapper\n                                mutation.addedNodes.forEach(function (node) {\n                                    // If it is the wrapper, find button and click it\n                                    if (node.classList !== undefined && node.classList.contains('hsuforum-reply-wrapper')) {\n                                        var button = node.querySelector('.hsuforum-use-advanced');\n                                        if (button) {\n                                            button.click();\n\n                                            var el = document.getElementById(\"hiddenadvancededitoreditable\");\n                                            el.focus();\n                                            return;\n                                        }\n                                    }\n                                });\n                            }\n                        }\n                    }\n                } catch (e) {\n                        // Silently fail as it means that it isn't the correct element\n                }\n            });\n\n            window.onload = function() {\n                // Select the node that will be observed for mutations\n                targetnode = document.querySelector(selector);\n                // Find any current forum display toggle buttons and click them\n                var currentbuttons = document.querySelector('.hsuforum-use-advanced');\n\n                if (currentbuttons) {\n                    currentbuttons.click();\n                    document.body.scrollTop = document.documentElement.scrollTop = 0;\n                }\n\n                // Start observing\n                observer.observe(targetnode, config);\n            };\n\n            // Dynamically injected cancel button\n            $(document).on('click', '.hsuforum-cancel', function() {\n                $('.hsuforum-footer-reply .hsuforum-textarea[contenteditable=\"true\"]').text('');\n            });\n\n            // Toggle editor button\n            $(document).on('click', '.hsuforum-use-advanced', function() {\n                if ($(this).parents('.hsuforum-footer-reply').length === 0) {\n                    $('.hsuforum-footer-reply .hsuforum-textarea[contenteditable=\"true\"]').text('');\n                }\n            });\n        }\n    };\n});\n"],"file":"mod_hsuforum_editor_toggle.min.js"}