YUI.add("moodle-mod_hsuforum-article",function(g,e){var t,n="hsuforum-thread-edit",s="hsuforum-post-edit",u={ADD_DISCUSSION:"#newdiscussionform input[type=submit]",ADD_DISCUSSION_TARGET:".hsuforum-add-discussion-target",ALL_FORMS:".hsuforum-reply-wrapper form",CONTAINER:".mod-hsuforum-posts-container",CONTAINER_LINKS:".mod-hsuforum-posts-container a",DISCUSSION:".hsuforum-thread",DISCUSSIONS:".hsuforum-threads-wrapper",DISCUSSION_EDIT:"."+n,DISCUSSION_BY_ID:'.hsuforum-thread[data-discussionid="%d"]',DISCUSSION_COUNT:".hsuforum-discussion-count",DISCUSSION_TARGET:".hsuforum-new-discussion-target",DISCUSSION_TEMPLATE:"#hsuforum-discussion-template",DISCUSSION_VIEW:".hsuforum-thread-view",EDITABLE_MESSAGE:"[contenteditable]",FORM:".hsuforum-form",FORM_ADVANCED:".hsuforum-use-advanced",FORM_REPLY_WRAPPER:".hsuforum-reply-wrapper",INPUT_FORUM:'input[name="forum"]',INPUT_MESSAGE:'textarea[name="message"]',INPUT_REPLY:'input[name="reply"]',INPUT_SUBJECT:'input[name="subject"]',LINK_CANCEL:".hsuforum-cancel",NO_DISCUSSIONS:".forumnodiscuss",NOTIFICATION:".hsuforum-notification",OPTIONS_TO_PROCESS:".hsuforum-options-menu.unprocessed",PLACEHOLDER:".thread-replies-placeholder",POSTS:".hsuforum-thread-replies",POST_BY_ID:'.hsuforum-post-target[data-postid="%d"]',POST_EDIT:"."+s,POST_TARGET:".hsuforum-post-target",RATE:".forum-post-rating",RATE_POPUP:".forum-post-rating a",REPLY_TEMPLATE:"#hsuforum-reply-template",SEARCH_PAGE:"#page-mod-hsuforum-search",VALIDATION_ERRORS:".hsuforum-validation-errors",VIEW_POSTS:".hsuforum-view-posts"},l="discussion:created",c="discussion:deleted",h="form:canceled",f="post:created",m="post:deleted",p="post:updated";function o(){o.superclass.constructor.apply(this,arguments)}function i(){i.superclass.constructor.apply(this,arguments)}function r(){r.superclass.constructor.apply(this,arguments)}M.mod_hsuforum=M.mod_hsuforum||{},o.NAME="moodle-mod_hsuforum-dom",o.ATTRS={io:{value:null}},g.extend(o,g.Base,{initializer:function(){g.all(u.RATE).addClass("processed"),this.initOptionMenus()},initFeatures:function(){this.initOptionMenus(),this.initRatings()},initRatings:function(){g.all(u.RATE).each(function(e){e.hasClass("processed")||(M.core_rating.Y=g,e.all("select.postratingmenu").each(M.core_rating.attach_rating_events,M.core_rating),e.all("input.postratingmenusubmit").setStyle("display","none"),e.addClass("processed"))})},initOptionMenus:function(){g.all(u.OPTIONS_TO_PROCESS).each(function(e){e.removeClass("unprocessed");var t=new g.YUI2.widget.Menu(e.generateID(),{lazyLoad:!0});t.render(g.one(u.CONTAINER).generateID()),g.one("#"+e.getData("controller")).on("click",function(e){e.preventDefault(),t.cfg.setProperty("y",e.currentTarget.getY()+e.currentTarget.get("offsetHeight")),t.cfg.setProperty("x",e.currentTarget.getX()),t.show()})})},handleViewRating:function(e){null===e.currentTarget.ancestor(".helplink")&&(e.preventDefault(),openpopup(e,{url:e.currentTarget.get("href")+"&popup=1",name:"ratings",options:"height=400,width=600,top=0,left=0,menubar=0,location=0,scrollbars,resizable,toolbar,status,directories=0,fullscreen=0,dependent"}))},markPostAsRead:function(e,t,o){this.get("io").send({postid:e,action:"markread"},t,o)},incrementDiscussionCount:function(e){var t=g.one(u.DISCUSSION_COUNT);null!==t&&(t.setData("count",parseInt(t.getData("count"),10)+e),t.setHTML(M.util.get_string("xdiscussions","mod_hsuforum",t.getData("count"))))},displayNotification:function(e){var t=g.Node.create(e);g.one(u.NOTIFICATION).append(t),setTimeout(function(){t.remove(!0)},1e4)},handleNotification:function(e){g.Lang.isString(e.notificationhtml)&&0<e.notificationhtml.trim().length&&this.displayNotification(e.notificationhtml)},handleUpdateDiscussion:function(e){var t=g.one("#discussionsview");t?t.setHTML(e.html):(t=g.one(u.DISCUSSION_BY_ID.replace("%d",e.discussionid)))?(t.replace(e.html),this.initRatings()):g.one(u.DISCUSSION_TARGET).insert(e.html,"after")},handleDiscussionCreated:function(){g.one(u.NO_DISCUSSIONS)&&g.one(u.NO_DISCUSSIONS).remove(),location.reload()},handleDiscussionDeleted:function(e){var t=g.one(u.POST_BY_ID.replace("%d",e.postid));null!==t&&t.hasAttribute("data-isdiscussion")&&(g.one(u.DISCUSSIONS)?(t.remove(!0),this.incrementDiscussionCount(-1),g.one(u.DISCUSSION_COUNT).focus()):window.location.href=e.redirecturl)}}),M.mod_hsuforum.Dom=o,t=g.Base.create("hsuforumRouter",g.Router,[],{initializer:function(){},discussion:function(e){this.get("article").viewDiscussion(e.query.d,e.query.postid)},post:function(e){g.Lang.isUndefined(e.query.reply)?g.Lang.isUndefined(e.query.forum)?g.Lang.isUndefined(e.query["delete"])?g.Lang.isUndefined(e.query.edit)?g.Lang.isUndefined(e.query.prune)||(window.location.href=e.url):this.get("article").get("form").showEditForm(e.query.edit):this.get("article").confirmDeletePost(e.query["delete"]):this.get("article").get("form").showAddDiscussionForm(e.query.forum):this.get("article").get("form").showReplyToForm(e.query.reply)},focusHash:function(e){var t=e.get("href").split("#");setTimeout(function(){g.one("#"+t[1]).ancestor("li").focus()},300)},handleRoute:function(e){1!==e.button||e.ctrlKey||e.metaKey||e.currentTarget.hasClass("disable-router")||e.currentTarget.hasClass("autolink")||e.currentTarget.ancestor(".posting")?-1<e.currentTarget.get("href").indexOf("#")&&this.focusHash(e.currentTarget):(M.mod_hsuforum.restoreEditor(),this.routeUrl(e.currentTarget.get("href"))&&e.preventDefault())},routeUrl:function(e){return!!this.hasRoute(e)&&(this.save(this.removeRoot(e)),!0)},handleAddDiscussionRoute:function(e){if(e.preventDefault(),M.mod_hsuforum.restoreEditor(),"undefined"!=typeof e.currentTarget){var t=e.currentTarget.ancestor("form"),o=t.one(u.INPUT_FORUM).get("value");this.save(t.get("action")+"?forum="+o)}},handleViewDiscussion:function(e){var t="/discuss.php?d="+e.discussionid;g.Lang.isUndefined(e.postid)||(t=t+"&postid="+e.postid),this.save(t)},hideForms:function(e,t,o){this.get("article").get("form").restoreDateFields(),this.get("article"
).get("form").removeAllForms(),o()}},{ATTRS:{article:{value:null},root:{valueFn:function(){return M.cfg.wwwroot.replace(this._regexUrlOrigin,"")+"/mod/hsuforum"}},routes:{value:[{path:"/view.php",callbacks:["hideForms"]},{path:"/discuss.php",callbacks:["hideForms","discussion"]},{path:"/post.php",callbacks:["hideForms","post"]}]}}}),M.mod_hsuforum.Router=t,i.NAME="moodle-mod_hsuforum-form",i.ATTRS={io:{value:null}},g.extend(i,g.Base,{handleFormPaste:function(r){var e,t,o,i,n,s="",a=window.getSelection(),d=function(e){var t,o,i=document.createElement("div");for(i.innerHTML=e,tags=i.getElementsByTagName("*"),t=0,o=tags.length;t<o;t++)tags[t].removeAttribute("id"),tags[t].removeAttribute("style"),tags[t].removeAttribute("size"),tags[t].removeAttribute("color"),tags[t].removeAttribute("bgcolor"),tags[t].removeAttribute("face"),tags[t].removeAttribute("align");return i.innerHTML},u=!1;if(r._event&&r._event.clipboardData&&r._event.clipboardData.getData?u=r._event.clipboardData:window.clipboardData&&window.clipboardData.getData&&(u=window.clipboardData),u&&(u.types?/text\/html/.test(u.types)||u.types.contains("text/html")?s=u.getData("text/html"):(/text\/plain/.test(u.types)||u.types.contains("text/plain"))&&(s=u.getData("text/plain")):s=u.getData("Text"),""!==s)){if(a.getRangeAt&&a.rangeCount){for(e=a.getRangeAt(0),(t=document.createElement("p")).innerHTML=d(s),"META"===t.childNodes[0].tagName&&t.removeChild(t.childNodes[0]),o=t.childNodes[t.childNodes.length-1],i=0;i<=t.childNodes.length;i++)n=t.childNodes[t.childNodes.length-1],e.insertNode(n);e.setStartAfter(o),e.setEndAfter(o),a.removeAllRanges(),a.addRange(e)}return r._event.preventDefault&&(r._event.stopPropagation(),r._event.preventDefault()),!1}setTimeout(function(){var e,t,n,o,i,s=d(r.currentTarget.get("innerHTML"));r.currentTarget.setContent(s),e=document.createRange(),t=window.getSelection(),i=1,i="undefined"!=typeof(o=(n=function(e){var t,o,i=e.childNodes;return!!i&&((t=i[i.length-1])&&void 0!==t?(o=n(t))&&void 0!==o?o:t&&void 0!==t?t:e:e)})(r.currentTarget._node)).innerHTML?o.innerHTML.length:o.length,e.setStart(o,i),e.collapse(!0),t.removeAllRanges(),t.addRange(e)},100)},handlePostToGroupsToggle:function(e){var t=e.currentTarget.ancestor("form"),o=t.one("#menugroupinfo");e.currentTarget.get("checked")?o.set("disabled","disabled"):o.set("disabled","")},handleTimeToggle:function(e){e.currentTarget.get("checked")?e.currentTarget.ancestor(".fdate_selector").all("select").set("disabled",""):e.currentTarget.ancestor(".fdate_selector").all("select").set("disabled","disabled")},_displayReplyForm:function(e){var t,o=g.one(u.REPLY_TEMPLATE).getHTML(),i=e.one(u.FORM_REPLY_WRAPPER);i instanceof g.Node?i.replace(o):e.append(o),i=e.one(u.FORM_REPLY_WRAPPER),this.attachFormWarnings(),i.one(u.INPUT_REPLY).setAttribute("value",e.getData("postid")),(t=i.one(u.FORM_ADVANCED)).setAttribute("href",t.getAttribute("href").replace(/reply=\d+/,"reply="+e.getData("postid"))),e.hasAttribute("data-ispost")&&i.one("legend").setHTML(M.util.get_string("replytox","mod_hsuforum",e.getData("author")))},_copyMessage:function(e){var t=e.one(u.EDITABLE_MESSAGE).get("innerHTML");e.one(u.INPUT_MESSAGE).set("value",t)},_submitReplyForm:function(t,o){var e,i,n;t.all("button").setAttribute("disabled","disabled"),this._copyMessage(t),e=t.all("form input[type=file]"),(i=g.one("#hiddenadvancededitordraftid"))&&((n=i.cloneNode()).id="hiddenadvancededitordraftidclone",t.one("form input").insert(n,"before")),this.get("io").submitForm(t.one("form"),function(e){e.yuiformsubmit=1,!0===e.errors?(t.one(u.VALIDATION_ERRORS).setHTML(e.html).addClass("notifyproblem"),t.all("button").removeAttribute("disabled")):o.call(this,e)},this,0<e._nodes.length)},attachFormWarnings:function(){g.all(u.ALL_FORMS).each(function(e){if(!e.hasClass("form-checker-added")){var t=M.core_formchangechecker.init({formid:e.generateID()});e.addClass("form-checker-added"),e.one(u.EDITABLE_MESSAGE).on("keypress",M.core_formchangechecker.set_form_changed,t)}})},removeAllForms:function(){g.all(u.POSTS+" "+u.FORM_REPLY_WRAPPER).each(function(e){e.ancestor(u.DISCUSSION_EDIT)||e.ancestor(u.POST_EDIT)||e.remove(!0)});var e=g.one(u.ADD_DISCUSSION_TARGET);null!==e&&e.empty()},handleCancelForm:function(e){e.preventDefault(),this.restoreDateFields(),M.mod_hsuforum.restoreEditor();var t=e.target.ancestor(u.POST_TARGET);if(!t)return t=e.target.ancestor(u.ADD_DISCUSSION_TARGET),void e.target.ancestor(u.FORM_REPLY_WRAPPER).remove(!0);t.removeClass(s).removeClass(n),e.target.ancestor(u.FORM_REPLY_WRAPPER).remove(!0),this.fire(h,{discussionid:t.getData("discussionid"),postid:t.getData("postid")})},handleFormSubmit:function(e){e.preventDefault(),M.mod_hsuforum.restoreEditor();var t=e.currentTarget.ancestor(u.FORM_REPLY_WRAPPER);this._submitReplyForm(t,function(e){switch(this.restoreDateFields(),e.eventaction){case"postupdated":case"postcreated":this.fire(p,e);break;case"discussioncreated":this.fire(l,e)}})},showReplyToForm:function(e){var t=g.one(u.POST_BY_ID.replace("%d",e));t.hasAttribute("data-ispost")&&this._displayReplyForm(t),t.one(u.EDITABLE_MESSAGE).focus()},setDateField:function(e,t,o){var i=new Date(1e3*o),n=i.getDate(),s=i.getMonth()+1,r=i.getFullYear();t?g.one("#id_time"+e+"_enabled").set("checked","checked"):g.one("#id_time"+e+"_enabled").removeAttribute("checked"),g.one("#id_time"+e+"_day").set("value",n),g.one("#id_time"+e+"_month").set("value",s),g.one("#id_time"+e+"_year").set("value",r),this.setDateFieldsClassState()},resetDateField:function(e){if(g.one("#discussion_dateform fieldset")){var t=Math.floor(Date.now()/1e3);this.setDateField(e,!1,t)}},resetDateFields:function(){var e,t=["start","end"];for(e in t)this.resetDateField(t[e])},setDateFieldsClassState:function(){var e=g.one("fieldset.dateform_fieldset");e&&e.all(".fdate_selector").each(function(e){e.one("input").get("checked")?e.all("select").set("disabled",""):e.all("select").set("disabled","disabled")})},applyDateFields:function(){var e=g.one(
"#discussion_dateform fieldset");e&&(e.addClass("dateform_fieldset"),e.removeClass("hidden"),e.one("legend")&&e.one("legend").remove(),g.one(".dateformtarget").append(e),g.all(".dateformtarget .fitem_fdate_selector a").addClass("disable-router"),this.setDateFieldsClassState())},setDateFields:function(e,t){0==e?this.resetDateField("start"):this.setDateField("start",!0,e),0==t?this.resetDateField("end"):this.setDateField("end",!0,t)},restoreDateFields:function(){g.one("#discussion_dateform")&&g.one("#discussion_dateform").append(g.one(".dateform_fieldset"))},showAddDiscussionForm:function(){g.one(u.ADD_DISCUSSION_TARGET).setHTML(g.one(u.DISCUSSION_TEMPLATE).getHTML()).one(u.INPUT_SUBJECT).focus(),this.resetDateFields(),this.applyDateFields(),this.attachFormWarnings()},showEditForm:function(e){var t,o,i=g.one(u.POST_BY_ID.replace("%d",e));i.hasClass(n)||i.hasClass(s)?i.one(u.EDITABLE_MESSAGE).focus():(t=this,o=g.one("#hiddenadvancededitordraftid"),this.get("io").send({discussionid:i.getData("discussionid"),postid:i.getData("postid"),draftid:o?o.get("value"):0,action:"edit_post_form"},function(e){i.prepend(e.html),i.hasAttribute("data-isdiscussion")?i.addClass(n):i.addClass(s),i.one(u.EDITABLE_MESSAGE).focus(),e.isdiscussion&&(t.applyDateFields(),t.setDateFields(e.timestart,e.timeend)),this.attachFormWarnings()},this))}}),M.mod_hsuforum.Form=i,r.NAME=e,r.ATTRS={contextId:{value:undefined},io:{readOnly:!0},dom:{readOnly:!0},router:{readOnly:!0},form:{readOnly:!0},liveLog:{readOnly:!0},editorMutateObserver:null,currentEditLink:null},g.extend(r,g.Base,{initializer:function(){this._set("router",new M.mod_hsuforum.Router({article:this,html5:!1})),this._set("io",new M.mod_hsuforum.Io({contextId:this.get("contextId")})),this._set("dom",new M.mod_hsuforum.Dom({io:this.get("io")})),this._set("form",new M.mod_hsuforum.Form({io:this.get("io")})),this._set("liveLog",M.mod_hsuforum.init_livelog()),this.bind()},bind:function(){var e,t,o,i,n,s,r,a,d=document.getElementsByClassName("hsuforum-post-unread")[0];if(d&&"#unread"===location.hash){if(e=document.getElementById(d.id).parentNode,navigator.userAgent.match(/Trident|MSIE/)){for(t=e.offsetTop,o=e;o=o.offsetParent;)t+=o.offsetTop;window.scrollTo(0,t)}else e.scrollIntoView();e.focus()}null===g.one(u.SEARCH_PAGE)&&(i=this.get("dom"),n=this.get("form"),s=this.get("router"),g.delegate("paste",n.handleFormPaste,document,".hsuforum-textarea",n),r='.hsuforum-discussion input[name="posttomygroups"]',g.delegate("click",n.handlePostToGroupsToggle,document,r,n),a=".hsuforum-discussion .fdate_selector input",g.delegate("click",n.handleTimeToggle,document,a,n),g.delegate("click",n.handleCancelForm,document,u.LINK_CANCEL,n),g.delegate("click",s.handleRoute,document,u.CONTAINER_LINKS,s),g.delegate("click",i.handleViewRating,document,u.RATE_POPUP,i),g.delegate("click",function(e){var t,o,i=g.one("#hiddenadvancededitorcont"),n=this;i&&(e.preventDefault(),t=g.one("#hiddenadvancededitoreditable"),t.ancestor(".editor_atto")?M.mod_hsuforum.toggleAdvancedEditor(n):(n.setContent(M.util.get_string("loadingeditor","hsuforum")),o=setInterval(function(){t.ancestor(".editor_atto")&&(clearInterval(o),M.mod_hsuforum.toggleAdvancedEditor(n))},500)))},document,".hsuforum-use-advanced"),g.delegate("submit",n.handleFormSubmit,document,u.FORM,n),g.delegate("click",s.handleAddDiscussionRoute,document,u.ADD_DISCUSSION,s),n.on(f,i.handleUpdateDiscussion,i),n.on(f,i.handleNotification,i),n.on(f,s.handleViewDiscussion,s),n.on(f,this.handleLiveLog,this),n.on(p,this.handlePostUpdated,this),n.on(l,i.handleUpdateDiscussion,i),n.on(l,i.handleDiscussionCreated,i),n.on(l,i.handleNotification,i),n.on(l,s.handleViewDiscussion,s),n.on(l,this.handleLiveLog,this),this.on(c,i.handleDiscussionDeleted,i),this.on(c,i.handleNotification,i),this.on(c,this.handleLiveLog,this),this.on(m,i.handleUpdateDiscussion,i),this.on(m,s.handleViewDiscussion,s),this.on(m,i.handleNotification,i),this.on(m,this.handleLiveLog,this),n.on(h,s.handleViewDiscussion,s))},handlePostUpdated:function(e){var t=this.get("dom"),o=this.get("form"),i=this.get("router");o.restoreDateFields(),t.handleUpdateDiscussion(e),i.handleViewDiscussion(e),t.handleNotification(e),this.handleLiveLog(e)},handleLiveLog:function(e){g.Lang.isString(e.livelog)&&this.get("liveLog").logText(e.livelog)},viewDiscussion:function(e,t){var o,i=g.one(u.DISCUSSION_BY_ID.replace("%d",e));i instanceof g.Node&&(g.Lang.isUndefined(t)||null===(o=g.one(u.POST_BY_ID.replace("%d",t)))||o.hasAttribute("data-isdiscussion")?i.focus():o.get("parentNode").focus())},confirmDeletePost:function(e){null!==g.one(u.POST_BY_ID.replace("%d",e))&&!0===window.confirm(M.str.mod_hsuforum.deletesure)&&this.deletePost(e)},deletePost:function(e){var t=g.one(u.POST_BY_ID.replace("%d",e));null!==t&&this.get("io").send({postid:e,sesskey:M.cfg.sesskey,action:"delete_post"},function(e){t.hasAttribute("data-isdiscussion")?this.fire(c,e):this.fire(m,e)},this)}}),M.mod_hsuforum.Article=r,M.mod_hsuforum.init_article=function(e){new r(e)},M.mod_hsuforum.dispatchClick=function(e){if(document.createEvent){var t=new MouseEvent("click",{view:window,bubbles:!0,cancelable:!0});e.dispatchEvent(t)}else e.fireEvent&&e.fireEvent("onclick")},M.mod_hsuforum.restoreEditor=function(){var e,t,o,i,n=g.one("#hiddenadvancededitorcont");if(n){if(!(e=g.one("#hiddenadvancededitoreditable")))return;t=e.ancestor(".editor_atto"),i=!1,(o=M.mod_hsuforum.Article.currentEditLink)&&(i=o.previous(".hsuforum-textarea")),!t||"none"===t.getComputedStyle("display")||(t.one(".atto_html_button.highlight")&&M.mod_hsuforum.dispatchClick(t.one(".atto_html_button.highlight")._node),i&&i.setContent(e.getContent())),M.mod_hsuforum.toggleAdvancedEditor(!1,!0),g.one("#hiddenadvancededitorcont").show(),g.one("#hiddenadvancededitorcont")._node.style.display="block",n.appendChild(t),n.appendChild(g.one("#hiddenadvancededitor"))}},M.mod_hsuforum.toggleAdvancedEditor=function(e,t,o){var i,n,s,r,a,d,u,l,c,h,f,m=!1;if(t||(m=e&&"false"===e.getAttribute(
"aria-pressed")),e&&(M.mod_hsuforum.Article.currentEditLink=e,m?e.removeClass("hideadvancededitor"):e.addClass("hideadvancededitor")),t){if(!e){for(i=g.all(".hsuforum-use-advanced"),n=0;n<i.size();n++)s=i.item(n),o&&o===s||M.mod_hsuforum.toggleAdvancedEditor(s,!0);return}}else M.mod_hsuforum.toggleAdvancedEditor(!1,!0,e);if(r=g.one("#hiddenadvancededitorcont"),d=e.previous(".hsuforum-textarea"),!r)throw"Failed to get editor";u=(a=g.one("#hiddenadvancededitoreditable")).ancestor(".editor_atto"),d&&a.setStyle("height",d.getDOMNode().offsetHeight+"px"),l=!1,u&&"none"!==u.getComputedStyle("display")||(l=!0),m?(e.setAttribute("aria-pressed","true"),e.setContent(M.util.get_string("hideadvancededitor","hsuforum")),d.hide(),u.one(".atto_html_button.highlight")&&g.one("#hiddenadvancededitor").show(),u.show(),d.insert(u,"before"),d.insert(g.one("#hiddenadvancededitor"),"before"),(c=g.one("#hiddenadvancededitordraftid"))&&((h=c.cloneNode()).id="hiddenadvancededitordraftidclone",d.insert(h,"before")),a.setContent(d.getContent()),a.focus(),f=function(){d.setContent(a.getContent())},window.MutationObserver?(M.mod_hsuforum.Article.editorMutateObserver=new MutationObserver(f),M.mod_hsuforum.Article.editorMutateObserver.observe(a.getDOMNode(),{childList:!0,characterData:!0,subtree:!0})):a.getDOMNode().addEventListener("DOMCharacterDataModified",editAreachanged,!1)):(e.setAttribute("aria-pressed","false"),M.mod_hsuforum.Article.editorMutateObserver&&M.mod_hsuforum.Article.editorMutateObserver.disconnect(),e.setContent(M.util.get_string("useadvancededitor","hsuforum")),d.show(),l||(u.one(".atto_html_button.highlight")&&M.mod_hsuforum.dispatchClick(u.one(".atto_html_button.highlight")._node),d.setContent(a.getContent())),g.one("#hiddenadvancededitor").hide(),u.hide())}},"@VERSION@",{requires:["base","node","event","router","core_rating","querystring","moodle-mod_hsuforum-io","moodle-mod_hsuforum-livelog","moodle-core-formchangechecker"]});